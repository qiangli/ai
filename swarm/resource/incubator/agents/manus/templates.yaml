###
# https://github.com/OthmanAdi/planning-with-files/templates

kit: "manus"
tools:
  - name: "templates_findings"
    description: "Findings"
    parameters:
      type: "object"
      properties:
        output:
          type: "string"
          description: |
            Specifies where the content will be sent. 
            Default is the console. Use "file:/absolute/path" to save it to a file.
    type: "func"
    body:
      mime_type: "text/*"
      script: |
        # Findings & Decisions
        <!-- 
          WHAT: Your knowledge base for the task. Stores everything you discover and decide.
          WHY: Context windows are limited. This file is your "external memory" - persistent and unlimited.
          WHEN: Update after ANY discovery, especially after 2 view/browser/search operations (2-Action Rule).
        -->

        ## Requirements
        <!-- 
          WHAT: What the user asked for, broken down into specific requirements.
          WHY: Keeps requirements visible so you don't forget what you're building.
          WHEN: Fill this in during Phase 1 (Requirements & Discovery).
          EXAMPLE:
            - Command-line interface
            - Add tasks
            - List all tasks
            - Delete tasks
            - Python implementation
        -->
        <!-- Captured from user request -->
        -

        ## Research Findings
        <!-- 
          WHAT: Key discoveries from web searches, documentation reading, or exploration.
          WHY: Multimodal content (images, browser results) doesn't persist. Write it down immediately.
          WHEN: After EVERY 2 view/browser/search operations, update this section (2-Action Rule).
          EXAMPLE:
            - Python's argparse module supports subcommands for clean CLI design
            - JSON module handles file persistence easily
            - Standard pattern: python script.py <command> [args]
        -->
        <!-- Key discoveries during exploration -->
        -

        ## Technical Decisions
        <!-- 
          WHAT: Architecture and implementation choices you've made, with reasoning.
          WHY: You'll forget why you chose a technology or approach. This table preserves that knowledge.
          WHEN: Update whenever you make a significant technical choice.
          EXAMPLE:
            | Use JSON for storage | Simple, human-readable, built-in Python support |
            | argparse with subcommands | Clean CLI: python todo.py add "task" |
        -->
        <!-- Decisions made with rationale -->
        | Decision | Rationale |
        |----------|-----------|
        |          |           |

        ## Issues Encountered
        <!-- 
          WHAT: Problems you ran into and how you solved them.
          WHY: Similar to errors in task_plan.md, but focused on broader issues (not just code errors).
          WHEN: Document when you encounter blockers or unexpected challenges.
          EXAMPLE:
            | Empty file causes JSONDecodeError | Added explicit empty file check before json.load() |
        -->
        <!-- Errors and how they were resolved -->
        | Issue | Resolution |
        |-------|------------|
        |       |            |

        ## Resources
        <!-- 
          WHAT: URLs, file paths, API references, documentation links you've found useful.
          WHY: Easy reference for later. Don't lose important links in context.
          WHEN: Add as you discover useful resources.
          EXAMPLE:
            - Python argparse docs: https://docs.python.org/3/library/argparse.html
            - Project structure: src/main.py, src/utils.py
        -->
        <!-- URLs, file paths, API references -->
        -

        ## Visual/Browser Findings
        <!-- 
          WHAT: Information you learned from viewing images, PDFs, or browser results.
          WHY: CRITICAL - Visual/multimodal content doesn't persist in context. Must be captured as text.
          WHEN: IMMEDIATELY after viewing images or browser results. Don't wait!
          EXAMPLE:
            - Screenshot shows login form has email and password fields
            - Browser shows API returns JSON with "status" and "data" keys
        -->
        <!-- CRITICAL: Update after every 2 view/browser operations -->
        <!-- Multimodal content must be captured as text immediately -->
        -

        ---
        <!-- 
          REMINDER: The 2-Action Rule
          After every 2 view/browser/search operations, you MUST update this file.
          This prevents visual information from being lost when context resets.
        -->
        *Update this file after every 2 view/browser/search operations*
        *This prevents visual information from being lost*

  - name: "templates_progress"
    description: "Progress"
    parameters:
      type: "object"
      properties:
        output:
          type: "string"
          description: |
            Specifies where the content will be sent. 
            Default is the console. Use "file:/absolute/path" to save it to a file.
    type: "func"
    body:
      mime_type: "text/*"
      script: |
        # Progress Log
        <!-- 
          WHAT: Your session log - a chronological record of what you did, when, and what happened.
          WHY: Answers "What have I done?" in the 5-Question Reboot Test. Helps you resume after breaks.
          WHEN: Update after completing each phase or encountering errors. More detailed than task_plan.md.
        -->

        ## Session: [DATE]
        <!-- 
          WHAT: The date of this work session.
          WHY: Helps track when work happened, useful for resuming after time gaps.
          EXAMPLE: 2026-01-15
        -->

        ### Phase 1: [Title]
        <!-- 
          WHAT: Detailed log of actions taken during this phase.
          WHY: Provides context for what was done, making it easier to resume or debug.
          WHEN: Update as you work through the phase, or at least when you complete it.
        -->
        - **Status:** in_progress
        - **Started:** [timestamp]
        <!-- 
          STATUS: Same as task_plan.md (pending, in_progress, complete)
          TIMESTAMP: When you started this phase (e.g., "2026-01-15 10:00")
        -->
        - Actions taken:
          <!-- 
            WHAT: List of specific actions you performed.
            EXAMPLE:
              - Created todo.py with basic structure
              - Implemented add functionality
              - Fixed FileNotFoundError
          -->
          -
        - Files created/modified:
          <!-- 
            WHAT: Which files you created or changed.
            WHY: Quick reference for what was touched. Helps with debugging and review.
            EXAMPLE:
              - todo.py (created)
              - todos.json (created by app)
              - task_plan.md (updated)
          -->
          -

        ### Phase 2: [Title]
        <!-- 
          WHAT: Same structure as Phase 1, for the next phase.
          WHY: Keep a separate log entry for each phase to track progress clearly.
        -->
        - **Status:** pending
        - Actions taken:
          -
        - Files created/modified:
          -

        ## Test Results
        <!-- 
          WHAT: Table of tests you ran, what you expected, what actually happened.
          WHY: Documents verification of functionality. Helps catch regressions.
          WHEN: Update as you test features, especially during Phase 4 (Testing & Verification).
          EXAMPLE:
            | Add task | python todo.py add "Buy milk" | Task added | Task added successfully | ✓ |
            | List tasks | python todo.py list | Shows all tasks | Shows all tasks | ✓ |
        -->
        | Test | Input | Expected | Actual | Status |
        |------|-------|----------|--------|--------|
        |      |       |          |        |        |

        ## Error Log
        <!-- 
          WHAT: Detailed log of every error encountered, with timestamps and resolution attempts.
          WHY: More detailed than task_plan.md's error table. Helps you learn from mistakes.
          WHEN: Add immediately when an error occurs, even if you fix it quickly.
          EXAMPLE:
            | 2026-01-15 10:35 | FileNotFoundError | 1 | Added file existence check |
            | 2026-01-15 10:37 | JSONDecodeError | 2 | Added empty file handling |
        -->
        <!-- Keep ALL errors - they help avoid repetition -->
        | Timestamp | Error | Attempt | Resolution |
        |-----------|-------|---------|------------|
        |           |       | 1       |            |

        ## 5-Question Reboot Check
        <!-- 
          WHAT: Five questions that verify your context is solid. If you can answer these, you're on track.
          WHY: This is the "reboot test" - if you can answer all 5, you can resume work effectively.
          WHEN: Update periodically, especially when resuming after a break or context reset.
          
          THE 5 QUESTIONS:
          1. Where am I? → Current phase in task_plan.md
          2. Where am I going? → Remaining phases
          3. What's the goal? → Goal statement in task_plan.md
          4. What have I learned? → See findings.md
          5. What have I done? → See progress.md (this file)
        -->
        <!-- If you can answer these, context is solid -->
        | Question | Answer |
        |----------|--------|
        | Where am I? | Phase X |
        | Where am I going? | Remaining phases |
        | What's the goal? | [goal statement] |
        | What have I learned? | See findings.md |
        | What have I done? | See above |

        ---
        <!-- 
          REMINDER: 
          - Update after completing each phase or encountering errors
          - Be detailed - this is your "what happened" log
          - Include timestamps for errors to track when issues occurred
        -->
        *Update after completing each phase or encountering errors*

  - name: "templates_task_plan"
    description: "Task Plan"
    parameters:
      type: "object"
      properties:
        output:
          type: "string"
          description: |
            Specifies where the content will be sent. 
            Default is the console. Use "file:/absolute/path" to save it to a file.
    type: "func"
    body:
      mime_type: "text/*"
      script: |
        # Task Plan: [Brief Description]
        <!-- 
          WHAT: This is your roadmap for the entire task. Think of it as your "working memory on disk."
          WHY: After 50+ tool calls, your original goals can get forgotten. This file keeps them fresh.
          WHEN: Create this FIRST, before starting any work. Update after each phase completes.
        -->

        ## Goal
        <!-- 
          WHAT: One clear sentence describing what you're trying to achieve.
          WHY: This is your north star. Re-reading this keeps you focused on the end state.
          EXAMPLE: "Create a Python CLI todo app with add, list, and delete functionality."
        -->
        [One sentence describing the end state]

        ## Current Phase
        <!-- 
          WHAT: Which phase you're currently working on (e.g., "Phase 1", "Phase 3").
          WHY: Quick reference for where you are in the task. Update this as you progress.
        -->
        Phase 1

        ## Phases
        <!-- 
          WHAT: Break your task into 3-7 logical phases. Each phase should be completable.
          WHY: Breaking work into phases prevents overwhelm and makes progress visible.
          WHEN: Update status after completing each phase: pending → in_progress → complete
        -->

        ### Phase 1: Requirements & Discovery
        <!-- 
          WHAT: Understand what needs to be done and gather initial information.
          WHY: Starting without understanding leads to wasted effort. This phase prevents that.
        -->
        - [ ] Understand user intent
        - [ ] Identify constraints and requirements
        - [ ] Document findings in findings.md
        - **Status:** in_progress
        <!-- 
          STATUS VALUES:
          - pending: Not started yet
          - in_progress: Currently working on this
          - complete: Finished this phase
        -->

        ### Phase 2: Planning & Structure
        <!-- 
          WHAT: Decide how you'll approach the problem and what structure you'll use.
          WHY: Good planning prevents rework. Document decisions so you remember why you chose them.
        -->
        - [ ] Define technical approach
        - [ ] Create project structure if needed
        - [ ] Document decisions with rationale
        - **Status:** pending

        ### Phase 3: Implementation
        <!-- 
          WHAT: Actually build/create/write the solution.
          WHY: This is where the work happens. Break into smaller sub-tasks if needed.
        -->
        - [ ] Execute the plan step by step
        - [ ] Write code to files before executing
        - [ ] Test incrementally
        - **Status:** pending

        ### Phase 4: Testing & Verification
        <!-- 
          WHAT: Verify everything works and meets requirements.
          WHY: Catching issues early saves time. Document test results in progress.md.
        -->
        - [ ] Verify all requirements met
        - [ ] Document test results in progress.md
        - [ ] Fix any issues found
        - **Status:** pending

        ### Phase 5: Delivery
        <!-- 
          WHAT: Final review and handoff to user.
          WHY: Ensures nothing is forgotten and deliverables are complete.
        -->
        - [ ] Review all output files
        - [ ] Ensure deliverables are complete
        - [ ] Deliver to user
        - **Status:** pending

        ## Key Questions
        <!-- 
          WHAT: Important questions you need to answer during the task.
          WHY: These guide your research and decision-making. Answer them as you go.
          EXAMPLE: 
            1. Should tasks persist between sessions? (Yes - need file storage)
            2. What format for storing tasks? (JSON file)
        -->
        1. [Question to answer]
        2. [Question to answer]

        ## Decisions Made
        <!-- 
          WHAT: Technical and design decisions you've made, with the reasoning behind them.
          WHY: You'll forget why you made choices. This table helps you remember and justify decisions.
          WHEN: Update whenever you make a significant choice (technology, approach, structure).
          EXAMPLE:
            | Use JSON for storage | Simple, human-readable, built-in Python support |
        -->
        | Decision | Rationale |
        |----------|-----------|
        |          |           |

        ## Errors Encountered
        <!-- 
          WHAT: Every error you encounter, what attempt number it was, and how you resolved it.
          WHY: Logging errors prevents repeating the same mistakes. This is critical for learning.
          WHEN: Add immediately when an error occurs, even if you fix it quickly.
          EXAMPLE:
            | FileNotFoundError | 1 | Check if file exists, create empty list if not |
            | JSONDecodeError | 2 | Handle empty file case explicitly |
        -->
        | Error | Attempt | Resolution |
        |-------|---------|------------|
        |       | 1       |            |

        ## Notes
        <!-- 
          REMINDERS:
          - Update phase status as you progress: pending → in_progress → complete
          - Re-read this plan before major decisions (attention manipulation)
          - Log ALL errors - they help avoid repetition
          - Never repeat a failed action - mutate your approach instead
        -->
        - Update phase status as you progress: pending → in_progress → complete
        - Re-read this plan before major decisions (attention manipulation)
        - Log ALL errors - they help avoid repetition
