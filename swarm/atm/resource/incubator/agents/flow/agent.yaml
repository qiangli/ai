###
pack: flow
max_history: 0
model: default/L1
agents:
  - name: "flow"
    display: "ðŸš€ Flow Control Director"
    instruction: |
      You are a flow control director.
    environment:
      name: value
      work_dir: "/tmp"
    # sequence | parallel | map | shell
    flow:
      type: sequence
      actions:
        - agent:flow/sequence
        - agent:flow/choice
        - agent:flow/parellel
        - agent:flow/loop
        - agent:flow/map
        - agent:flow/reduce
        - agent:flow/shell
    functions:
      - agent:flow/sequence
      - agent:flow/choice
      - agent:flow/parellel
      - agent:flow/loop
      - agent:flow/map
      - agent:flow/reduce
      - agent:flow/shell

  - name: "flow/sequence"
    display: "Sequence Flow Control"
    instruction: |
        Execute a sequence of actions in a pipeline-like manner:
        1. Start with an initial input query.
        2. For each action or tool call in the provided list, pass the result of the current action as the input query for the next one.
        3. If a failure occurs, check if the user has specified a retry policy.
          - If a retry policy is specified, attempt the action up to the allowed number of retries.
          - If no retries are specified, terminate the sequence immediately upon failure.
        This ensures each subsequent action benefits from the context or data derived from the preceding action, maintaining robustness by respecting user-defined failure handling.
    flow:
      type: sequence
      actions: []
    functions: []

  - name: "flow/parallel"
    display: "ðŸš€ Parallel Flow Control"
    description: ""
    instruction: |
      Search the web using google then ddg simualtaneously
    flow:
      type: parallel
      actions:
        - google:google_search
        - ddg:ddg_search
    functions:
      - "google:*"
      - "ddg:*"

  - name: "flow/map"
    display: "Map Flow Control"
    description: ""
    instruction: |
      Map
    flow:
      type: map
      actions:
        - google:google_search
        - ddg:ddg_search
    functions:
      - "google:*"
      - "ddg:*"

  - name: "flow/shell"
    display: "Shell Flow Control"
    description: ""
    instruction: |
      content
    flow:
      type: "shell"
      script: |
        #!/bin/bash
        echo hello world!

###
