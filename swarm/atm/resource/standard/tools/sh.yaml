###
kit: "sh"
type: "system"

tools:
  - name: "help"
    display: "Shell Tool Help"
    description: |
      A set of tools for executing agent, tool, system command actions
      and applying templates.
    parameters: {}
    type: "func"
    body:
      language: "golang"
      code: |
        import "fmt"
        const desc = `
        A set of tools for executing agent, tool, system command actions
        and applying templates.

        ## Actions
          + bash
          + exec
          + format
          + parse

        ## Templates
          + apply
        `
        func main() {
          fmt.Printf(desc)
        }
    log_level: "quiet"

  - name: "exec"
    description: |
      Execute a specified command within the user's environment.
      Note: Ensure the command is specified as a command line string. Security restrictions may apply.
    parameters:
      type: "object"
      properties:
        command:
          type: "string"
          description: "The command to execute as a command line string."

      required:
        - command

  # - name: "cd"
  #   description: "Change the current working directory on user's system."
  #   parameters:
  #     type: "object"
  #     properties:
  #       dir:
  #         type: "string"
  #         description: "The directory to change to."
  #     required:
  #       - dir

  - name: "pwd"
    description: "Print the current working directory on user's system."
    parameters: {}

  - name: "bash"
    description: |
      Executes a shell script within the user's environment.
      The script can be a file path or inline with the "data:" prefix.
      Note: security restrictions may apply.
    parameters:
      type: "object"
      properties:
        script:
          type: "string"
          description: |
            Path to the script file or inline script prefixed with 'data:'.
      required:
        - script

  - name: "apply"
    description: |
      Applies a Golang template to provided data, as documented at: https://pkg.go.dev/text/template.
      The template can be specified either as a file path or as an inline string prefixed with "data:".
      Additional arguments represent the data to be used in the template. Some default data variables include:
      + query - the user's request message
      + result - the last LLM's response
      + error - any errors encountered during processing
      Additional environment variables are also available and can be inspected using the ai:get_envs tool call.
    parameters:
      type: "object"
      properties:
        template:
          type: "string"
          description: |
            Specifies the template to be applied to the data.
            It can be specified either as a file path or as an inline string prefixed with "data:".
            Provide any additional arguments required by the template.
      required:
        - template

  - name: "format"
    description: |
      Specifies the format or a custom template for the output.
    parameters:
      type: "object"
      properties:
        result:
          type: "string"
          description: "Output. default to the result of the last response"
        error:
          type: "string"
          description: "Error message. default to the last error encountered during previous processing."
        format:
          type: "string"
          description: |
            The desired output format. Options are "text", "json", "markdown".
            The default is "markdown".
        template:
          type: "string"
          description: |
            Specifies custom template to be applied to the data. If not provided, default templates will be used.
            It can be specified either as a file path or as an inline string prefixed with "data:".

  - name: "parse"
    description: |
      Parses an input command line into a `map[string]any` format and validate.
    parameters:
      type: "object"
      properties:
        command:
          type: "string"
          description: |
            Specifies the command line to be parsed.
      required:
        - command
