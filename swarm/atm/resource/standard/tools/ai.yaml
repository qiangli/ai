###
kit: "ai"
type: "ai"

tools:
  # - name: "ai"
  #   display: "AI"
  #   description: |
  #     A framework for managing AI agents and tools.
  #   parameters: {}
  #   type: "agent"

  - name: "help"
    display: "AI Tool Help"
    description: |
      A set of tools for managing agents and tools
    parameters: {}
    type: "func"
    body:
      language: "golang"
      code: |
        import "fmt"
        const desc = `
        A set of tools for managing agents and tools.

        ## Agents
          + list_agents
          + get_agent_info
          + spawn_agent

        ## Tools
          + list_tools
          + get_tool_info
          + execute_tool
        `
        func main() {
          fmt.Printf(desc)
        }
    log_level: "quiet"

  - name: "call_llm"
    description: "Connects to the LLM, sends a request, and retrieves a response, with optional tool calls."
    parameters:
      type: "object"
      properties:
        prompt:
          type: "string"
          description: "System prompt for guiding the LLM's response. Acts as context or instructions for the LLM."
        query:
          type: "string"
          description: "The main content or question from the user that requires a response from the LLM."
        model:
          type: "string"
          description: |
            Specifies the LLM model to use. Defaults to 'default/any' if not provided.
            Ensure the model name is valid. Use the 'ai:list_models' function to view available models.
        tools:
          type: "array"
          items:
            type: "string"
          description: |
            List of tool names to utilize during the LLM call, specified in the format 'kit:name'.
            Ensure each tool name is valid using the 'ai:list_tools' function to find available tools.
      required:
        - query

  - name: "list_agents"
    description: "Retrieve the list of AI agents accessible to the current user"
    parameters:
      type: object
      properties: {}

  - name: "get_agent_info"
    description: "Retrieve detailed information about a specified agent, including display name, description, and instructions"
    parameters:
      type: "object"
      properties:
        agent:
          type: "string"
          description: "The name of the agent"
      required:
        - "agent"

  - name: "read_agent_config"
    description: |
      Retrieve the configuration used to create a specified agent instance.
      The content may also include configurations for other agents in the same
      package as well as tools utilized by the agents.
    parameters:
      type: "object"
      properties:
        agent:
          type: "string"
          description: |
            The name of the agent for which the configuration is requested.
            Use 'self' to refer to the current agent invoking the tool.
      required:
        - "agent"

  - name: "new_agent"
    description: "Create an instance of a new agent"
    parameters:
      type: "object"
      properties:
        agent:
          type: "string"
          description: "The name of the agent"
      required:
        - "agent"
  
  - name: "build_agent"
    description: |
      Construct user query based on user's message input. Retrieve the prompt 
      from instructions specified in the agent configuration and context from 
      the historical conversation messages. Applies templates formatted 
      using Golang template syntax.
    parameters:
      type: "object"
      properties:
        agent:
          type: "string"
          description: "Specifies the name of the agent to construct."
      required:
        - "agent"
    type: "func"
    body:
      mime_type: "application/x-sh"
      script: |
        #!/bin/bash
        /ai:build_query
        /ai:build_prompt
        /ai:build_context

  - name: "transfer_agent"
    description: "Trasnfer the current task to a specific agent"
    parameters:
      type: "object"
      properties:
        agent:
          type: "string"
          description: "The name of the agent"
      required:
        - "agent"

  - name: "reload_agent"
    description: |
      Reload the current agent with a new configuration.
      The script can be a file path or inline with the "data:" prefix.
      Ensure the script is a properly formatted YAML file.
    parameters:
      type: "object"
      properties:
        script:
          type: "string"
          description: |
            Path to the script file or inline script prefixed with 'data:'.
            The script is used to reconfigure the agent.
      required:
        - "script"

  - name: "spawn_agent"
    description: "Delegate the current task to a specific agent"
    parameters:
      type: "object"
      properties:
        agent:
          type: "string"
          description: "The name of the agent"
      required:
        - "agent"

  - name: "list_tools"
    description: "Enumerate AI tool functions available for selection"
    parameters:
      type: object
      properties: {}

  - name: "get_tool_info"
    description: "Get information about a specific tool"
    parameters:
      type: "object"
      properties:
        tool:
          type: "string"
          description: "The name of the tool"
      required:
        - "tool"

  - name: "read_tool_config"
    description: |
      Retrieve the configuration used to create a tool call function.
      The content may also include configurations for other tools within the same toolkit.
    parameters:
      type: "object"
      properties:
        tool:
          type: "string"
          description: "The name of the tool"
      required:
        - "tool"

  - name: "execute_tool"
    description: "Call the tool function"
    parameters:
      type: "object"
      properties:
        tool:
          type: "string"
          description: "The name of the tool"
        parameters:
          type: "object"
          description: "The arguments for the tool call"
          properties: {}
      required:
        - "tool"
        - "parameters"

  - name: "list_models"
    description: "List all AI language model aliases created by the current user"
    parameters:
      type: object
      properties: {}

  - name: "list_messages"
    description: "Retrieve a list of messages from past conversations based on specified criteria"
    parameters:
      type: "object"
      properties:
        max_history:
          type: "integer"
          description: "The maximum number of past messages to retrieve"
          default: 7
          minimum: 0
        max_span:
          type: "integer"
          description: "The time frame, in minutes, to look back for past messages"
          default: 1440
          minimum: 0
        offset:
          type: "integer"
          description: "The number of most recent messages to skip before retrieving the specified past messages"
          default: 0
          minimum: 0
        roles:
          type: "array"
          description: "Specify roles to include, such as system, assistant, and user. By default, [assistant, user] are included, while system is excluded."
          items:
            type: "string"

  - name: "get_message_info"
    description: "Retrieve detailed information for a specific message from past conversations by id."
    parameters:
      type: "object"
      properties:
        id:
          type: "string"
          description: "A unique identifier for the message"
      required:
        - "id"

  - name: "get_envs"
    description: "Get specific or all environment variables"
    parameters:
      type: "object"
      properties:
        keys:
          type: "array"
          description: "An array of environment variable names to retrieve. If not provided, all environment variables will be returned"
          items:
            type: "string"

  - name: "set_envs"
    description: "Set environment variables"
    parameters:
      type: "object"
      properties: {}
      description: |
        An JSON object map of environment variables, represented as key-value pairs.
        Each key is a string, and the value can be any data type, including objects and primitive types.

  - name: "unset_envs"
    description: "Clear environment variables"
    parameters:
      type: "object"
      properties:
        keys:
          type: "array"
          description: "An array of environment variable names to unset."
          items:
            type: "string"
      required: ["keys"]
